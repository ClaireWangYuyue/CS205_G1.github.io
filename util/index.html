---
layout: default
title: util
---

<div class="util">
	<h1>How to Use our Program to Solve Giant Sudoku?</h1>
	<h2 id="downloadsourcecode">Download Source Code</h2>
	
	<p>To run our sudoku solver, first download our 
		<a href="https://github.com/shiyunqiu/CS205_Sudoku" style="color: blue">source code and test cases</a>.
	</p>
	
	<h2 id="setup">Set Up</h2>
	<p>We adapted our code to AWS t2.2xlarge instances with Ubuntu 16.04.4 LTS. 
		To set up an AWS cluster with OpenMP and MPI configured, we followed the guides provided by CS205: 
		<a href="https://github.com/shiyunqiu/CS205_Sudoku/blob/master/documents/Harvard%20CS205%20-%20Spring%202018%20-%20Guide%20-%20Performance%20Optimization%20and%20OpenMP%20on%20AWS%20-%20v1.0.pdf" style="color: blue">OpenMP</a> 
		and <a href="https://github.com/shiyunqiu/CS205_Sudoku/blob/master/documents/Harvard%20CS205%20-%20Spring%202018%20-%20Guide%20-%20MPI%20on%20AWS%20-%20v1.1.pdf" style="color: blue">MPI</a>. After the setup, you should have:
	</p>
	<ul>
		<li>enabled passwordless ssh between any pair of cluster nodes with username <code>mpiuser</code></li>
		<li>created the directory <code>/home/mpiuser/cloud</code> on the master node and shared it with all other nodes</li>
		<li>configured the MPI environment using ports 10000-10100</li>
		<li>installed <code>mpich</code></li>
	</ul>
	<p>In addition, as we use makefile to compile our code, you need to install <code>build-essential</code>. 
		To nail this down, run the following command line on the master node:</p>
	<pre><code>$ sudo apt-get install build-essential</code></pre>
	
	<h2 id="run">Run</h2>
	<p>Upload our source code and test cases to the master node. You may use the following command lines:</p>
	<pre><code>$ scp -i [ssh key] &lt;parent directory&gt;/src/* mpiuser@&lt;master node public IP&gt;:~/cloud/src<br>$ scp -i [ssh key] &lt;parent directory&gt;/test_cases/* mpiuser@&lt;master node public IP&gt;:~/cloud/test_cases</code></pre>
	<p>Connect to your master node on AWS, log in as <code>mpiuser</code> and change directory to <code>cloud/src</code>. 
		You can build the program with a command:</p>
	<pre><code>$ make</code></pre>
	<p>This creates an executable named <code>run</code>. By default it solves a relatively simple test case with serial 
		algorithm. You may run our parallel implementations by uncommenting specific lines in <code>main.cpp</code>. 
		We wrote the instructions in detail in the main function.</p>
	<p>To run the serial solver, simply type</p>
	<pre><code>$ ./run </code></pre>
	<p>In your terminal. The OpenMP version can be executed in the same way. However, if you want to tune the 
		number of threads, you can specify it as an environment variable:</p>
	<pre><code>$ export OMP_NUM_THREADS=&lt;the number of threads you want&gt;</code></pre>
	<p>To execute the MPI versions, you have to use the <code>mpirun</code> keyword:</p>
	<pre><code>$ mpirun -np [number of processes] -hosts [list of hostnames] ./run</code></pre>
	<p>For example, to use 4 nodes with 1 process per node, the command is like:</p>
	<pre><code>$ mpirun -np 4 -hosts master,node1,node2,node3,node4 ./run</code></pre>
	
	<h2 id="testcases">Test Cases</h2>
	<p>All the <a href="https://github.com/shiyunqiu/CS205_Sudoku/tree/master/test_cases" style="color: blue">test cases</a> are 
		under the <code>test_cases</code> directory in our Github Repository. </p>

	<p><code>test16_1min.sdk</code>: a 16 * 16 sudoku problem, took 1 min to solve in serial version</p>

	<p><code>test16_5min.sdk</code>: a 16 * 16 sudoku problem, took 5 min to solve in serial version </p>

	<p><code>test16_15min.sdk</code>: a 25 * 25 sudoku problem, took 15 min to solve in serial version</p>

	<p><code>test25_5min.sdk</code>: a 25 * 25 sudoku problem, took 5 min to solve in serial version </p>

	<p><code>test25_15min.sdk</code>: a 25 * 25 sudoku problem, took 15 min to solve in serial version </p>

	<p><code>test25_28min.sdk</code>: a 25 * 25 sudoku problem, took 28 min to solve in serial version</p>

</div>
